@*
For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "Dashboard Admin";
}

<div class="row">
    <div class="col-md-6 col-sm-12" data-aos="zoom-in-up" data-aos-easing="linear" data-aos-duration="690">
        <div class="card card-stats mb-4 p-3" style="border-radius: 10px;">
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <h5 class="card-title text-uppercase text-muted mb-0">Pertanyaan Kuesioner</h5>
                        <span class="h2 font-weight-bold mb-0 num" runat="server" id="dataPK" data-val="0">0</span>
                    </div>
                </div>

                <p class="mt-3 mb-0 text-muted text-sm">
                    <a href='/Pages/Admin/Pertanyaan_Kuesioner.aspx' data-toggle="tooltip" data-placement="bottom" data-original-title="Lihat Pertanyaan Kuesioner">
                        <span class="mr-2">
                            <i class="fa fa-arrow-circle-right"></i> Pertanyaan Kuesioner
                        </span>
                    </a>
                </p>
            </div>
        </div>
    </div>

    <div class="col-md-6 col-sm-12" data-aos="zoom-in-up" data-aos-easing="linear" data-aos-duration="690">
        <div class="card card-stats mb-4 p-3" style="border-radius: 10px;">
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <h5 class="card-title text-uppercase text-muted mb-0">Jawaban Kuesioner</h5>
                        <span class="h2 font-weight-bold mb-0 num" runat="server" id="dataJK" data-val="0">0</span>
                    </div>
                </div>

                <p class="mt-3 mb-0 text-muted text-sm">
                    <a href='/Pages/Admin/Jawaban_Kuesioner.aspx' data-toggle="tooltip" data-placement="bottom" data-original-title="Lihat Jawaban Kuesioner">
                        <span class="mr-2">
                            <i class="fa fa-arrow-circle-right"></i> Jawaban Kuesioner
                        </span>
                    </a>
                </p>
            </div>
        </div>
    </div>

    <div class="col-md-6 col-sm-12" data-aos="zoom-in-up" data-aos-easing="linear" data-aos-duration="690">
        <div class="card card-stats mb-4 p-3" style="border-radius: 10px;">
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <h5 class="card-title text-uppercase text-muted mb-0">Detail Jenis Periode</h5>
                        <span class="h2 font-weight-bold mb-0 num" runat="server" id="dataDJP" data-val="0">0</span>
                    </div>
                </div>

                <p class="mt-3 mb-0 text-muted text-sm">
                    <a href='/Pages/Admin/Detail_Jenis_Periode.aspx' data-toggle="tooltip" data-placement="bottom" data-original-title="Lihat Detail Jenis Periode">
                        <span class="mr-2">
                            <i class="fa fa-arrow-circle-right"></i> Detail Jenis Periode
                        </span>
                    </a>
                </p>
            </div>
        </div>
    </div>

    <div class="col-md-6 col-sm-12" data-aos="zoom-in-up" data-aos-easing="linear" data-aos-duration="690">
        <div class="card card-stats mb-4 p-3" style="border-radius: 10px;">
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <h5 class="card-title text-uppercase text-muted mb-0">Detail Pertanyaan Jawaban</h5>
                        <span class="h2 font-weight-bold mb-0 num" runat="server" id="dataDPJ" data-val="0">0</span>
                    </div>
                </div>

                <p class="mt-3 mb-0 text-muted text-sm">
                    <a href='/Pages/Admin/Detail_Pertanyaan_Jawaban.aspx' data-toggle="tooltip" data-placement="bottom" data-original-title="Lihat Detail Pertanyaan Jawaban">
                        <span class="mr-2">
                            <i class="fa fa-arrow-circle-right"></i> Detail Pertanyaan Jawaban
                        </span>
                    </a>
                </p>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-6 col-md-12 mb-4 justify-content-center" data-aos="zoom-in-up" data-aos-easing="linear" data-aos-duration="690">
        <center>
            <span style="font-size: Larger; font-weight: bold;">Data Alumni Berdasarkan Tahun</span><br>
            <br>
        </center>

        <canvas id="myChartBar"></canvas>
    </div>

    <div class="col-lg-6 col-md-12 mb-4 justify-content-center" data-aos="zoom-in-up" data-aos-easing="linear" data-aos-duration="690">
        <center>
            <span style="font-size: Larger; font-weight: bold;">Akun Yang Belum Diverifikasi</span><br>
            <br>
        </center>

        <div style="overflow-x: auto; width: 100%;">
            <asp:GridView runat="server" ID="gridDataAkunTracerStudyAlumni" CssClass="table table-hover table-bordered table-condensed table-striped grid scrollstyle" AllowPaging="true"
                AllowSorting="false" AutoGenerateColumns="false" DataKeyNames="id" EmptyDataText="Tidak ada Data Akun Tracer Study Alumni Yang Belum Diverifikasi"
                ShowHeaderWhenEmpty="true" EmptyDataRowStyle-HorizontalAlign="Center">
                <Columns>
                    <asp:TemplateField HeaderText="Aksi" ItemStyle-HorizontalAlign="Center">
                        <ItemTemplate>
                            <asp:Panel runat="server" Visible='<%# Eval("status").ToString() == "Belum Diverifikasi" %>'>
                                <a rel="tooltip" data-placement="left" title="Terima Akun Alumni" href="#" data-id="<%# Eval("id") %>"
                                    data-nim="<%# Eval("nim") %>" class="accept">
                                    <i class="fa fa-check" aria-hidden="true"></i>
                                </a>&nbsp;
                                <a rel="tooltip" data-placement="left" title="Tolak Akun Alumni" href="#" data-id="<%# Eval("id") %>"
                                    data-nim="<%# Eval("nim") %>" class="reject">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                </a>
                            </asp:Panel>

                            <asp:Label runat="server" Visible='<%# Eval("status").ToString() == "Diterima" %>'>Alumni Diterima</asp:Label>
                            <asp:Label runat="server" Visible='<%# Eval("status").ToString() == "Ditolak" %>'>Alumni Ditolak</asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>

                    <asp:BoundField DataField="nim" HeaderText="Nomor Induk Mahasiswa" NullDisplayText="-" ItemStyle-HorizontalAlign="Center" />
                    <asp:BoundField DataField="nama" HeaderText="Nama Alumni" HeaderStyle-HorizontalAlign="Left" NullDisplayText="-" ItemStyle-HorizontalAlign="Left" />
                    <asp:BoundField DataField="tahun_lulus" HeaderText="Tahun Lulus" NullDisplayText="-" ItemStyle-HorizontalAlign="Center" />
                </Columns>
            </asp:GridView>
        </div>
    </div>

    <div class="col-lg-6 col-md-12 mb-4 justify-content-center" data-aos="zoom-in-up" data-aos-easing="linear" data-aos-duration="690">
        <center>
            <span style="font-size: Larger; font-weight: bold;">Data Alumni Besertakan Status</span><br>
            <br>
        </center>

        <center>
            <canvas id="myChartDoughnut"></canvas>
        </center>
    </div>

    <div class="col-lg-6 col-md-12 mb-4 justify-content-center" data-aos="zoom-in-up" data-aos-easing="linear" data-aos-duration="690">
        <center>
            <span style="font-size: Larger; font-weight: bold;">Data Kuesioner Terisi Berdasarkan Jenis Kuesioner</span><br>
            <br>
        </center>

        <% if (Int32.Parse(Session["countHK"].ToString()) == 0) { %>
	        <center>
		        <p>Data Hasil Kuesioner Tidak Ada</p>
	        </center>
        <% } else { %>
	        <center>
                <canvas id="myChartPie"></canvas>
	        </center>
        <% } %>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

@* <script type="text/javascript">
    $(document).ready(function () {
        const ctx = document.getElementById('myChartBar');
        const ctxx = document.getElementById('myChartDoughnut');
        const ctxxx = document.getElementById('myChartPie');

        var hasilChartBar;
        var hasilChartDoughnut;
        var hasilChartPie;

        var labelsTahunLulus = [];
        var dataTahunLulus = [];

        var labelsStatus = [];
        var dataStatus = [];

        var labelsKuesioner = [];
        var dataKuesioner = [];

        $.ajax({
            type: "POST",
            url: "/Pages/Admin/Dashboard.aspx/GetReturnAlumniBerdasarkanTahun",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (result) {
                hasilChartBar = JSON.parse('' + result.d + '');
                console.log(hasilChartBar.length);

                for (let i = 0; i < hasilChartBar.length; i++) {
                    dataTahunLulus[i] = hasilChartBar[i].hitung;
                    labelsTahunLulus[i] = hasilChartBar[i].tahun_lulus;
                }

                console.log(dataTahunLulus);
                console.log(labelsTahunLulus);

                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labelsTahunLulus,
                        datasets: [{
                            label: 'Data Alumni Berdasarkan Tahun',
                            data: dataTahunLulus,
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }, error: function (data) {
                console.log(data.responseText);
            }
        });

        $.ajax({
            type: "POST",
            url: "/Pages/Admin/Dashboard.aspx/GetReturnAlumniBerdasarkanStatus",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (result) {
                hasilChartDoughnut = JSON.parse('' + result.d + '');
                console.log(hasilChartDoughnut.length);

                for (let i = 0; i < hasilChartDoughnut.length; i++) {
                    dataStatus[i] = hasilChartDoughnut[i].hitung;
                    labelsStatus[i] = hasilChartDoughnut[i].status;
                }

                console.log(dataStatus);
                console.log(labelsStatus);

                new Chart(ctxx, {
                    type: 'doughnut',
                    data: {
                        labels: labelsStatus,
                        datasets: [{
                            label: 'Jumlah Alumni',
                            data: dataStatus,
                            backgroundColor: [
                                'rgb(255, 99, 132)',
                                'rgb(54, 162, 235)',
                                'rgb(255, 205, 86)'
                            ],
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        width: 700,
                    },
                });
            }, error: function (data) {
                console.log(data.responseText);
            }
        });

        $.ajax({
            type: "POST",
            url: "/Pages/Admin/Dashboard.aspx/GetReturnHasilKuesionerBerdasarkanJenisKuesioner",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (result) {
                hasilChartPie = JSON.parse('' + result.d + '');
                console.log(hasilChartPie.length);

                for (let i = 0; i < hasilChartPie.length; i++) {
                    dataKuesioner[i] = hasilChartPie[i].hitung;
                    labelsKuesioner[i] = hasilChartPie[i].jenis_kuesioner;
                }

                console.log(dataKuesioner);
                console.log(labelsKuesioner);

                new Chart(ctxxx, {
                    type: 'pie',
                    data: {
                        labels: labelsKuesioner,
                        datasets: [{
                            label: 'Jumlah Kuesioner',
                            data: dataKuesioner,
                            backgroundColor: [
                                'rgb(255, 99, 132)',
                                'rgb(54, 162, 235)',
                                'rgb(255, 205, 86)'
                            ],
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        width: 700,
                    },
                });
            }, error: function (data) {
                console.log(data.responseText);
            }
        });
    });
</script>

<script type="text/javascript">
    $(".accept").click(function () {
        var id = $(this).data('id');
        console.log(id);

        Swal.fire({
            title: 'Apakah anda yakin terima akun dengan ID ' + id,
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#5cb85c',
            cancelButtonColor: '#d9534f',
            confirmButtonText: 'Ya Terima!'
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                    url: '/Pages/Admin/Konfirmasi_Akun_Update.aspx?idTerima=' + id,
                    method: "POST"
                });

                Swal.fire({
                    title: 'Berhasil !',
                    text: 'Akun dengan ID ' + id + '. Berhasil Diterima.',
                    type: 'success',
                    icon: 'success'
                }).then(okay => {
                    if (okay) {
                        window.location.href = "/Pages/Admin/Dashboard.aspx"
                    }
                });
            } else if (result.dismiss === Swal.DismissReason.cancel) {
                Swal.fire({
                    title: 'Batal !',
                    text: 'Akun dengan ID ' + id + '. Batal Diterima.',
                    type: 'error',
                    icon: 'error'
                });
            }
        });
    });
</script>
    
<script type="text/javascript">
    $(".reject").click(function () {
        var id = $(this).data('id');
        console.log(id);

        Swal.fire({
            title: 'Apakah anda yakin tolak akun dengan ID ' + id,
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#5cb85c',
            cancelButtonColor: '#d9534f',
            confirmButtonText: 'Ya Tolak!'
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                    url: '/Pages/Admin/Konfirmasi_Akun_Update.aspx?idTolak=' + id,
                    method: "POST"
                });

                Swal.fire({
                    title: 'Berhasil !',
                    text: 'Akun dengan ID ' + id + '. Berhasil Ditolak.',
                    type: 'success',
                    icon: 'success'
                }).then(okay => {
                    if (okay) {
                        window.location.href = "/Pages/Admin/Dashboard.aspx"
                    }
                });
            } else if (result.dismiss === Swal.DismissReason.cancel) {
                Swal.fire({
                    title: 'Batal !',
                    text: 'Akun dengan ID ' + id + '. Batal Ditolak.',
                    type: 'error',
                    icon: 'error'
                });
            }
        });
    });
</script>
 *@